<div class="container mt-4 orders-history">
  <h2 class="mb-4">История заказов</h2>

  <form [formGroup]="filtersForm" class="row mb-3 align-items-center justify-content-between">
    <div class="col-md-6 mb-2 mb-md-0">
      <input
        type="text"
        class="form-control"
        placeholder="Поиск по номеру заказа или дате"
        formControlName="searchQuery"
      />
    </div>

    <div class="col-md-4 mb-2 mb-md-0">
      <select class="form-select" formControlName="sortOrder">
        <option value="date_desc">По дате (новые сверху)</option>
        <option value="date_asc">По дате (старые сверху)</option>
        <option value="status">По статусу</option>
      </select>
    </div>
  </form>

  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-light">
      <tr>
        <th>Номер заказа</th>
        <th>Дата</th>
        <th>Сумма</th>
        <th>Статус</th>
        <th>Детали</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let order of filteredOrders">
        <td>{{ order.orderNumber }}</td>
        <td>{{ order.date | date: 'dd.MM.yyyy' }}</td>
        <td>{{ order.totalAmount | currency: 'USD' }}</td>
        <td>{{ order.status }}</td>
        <td>
          <button
            class="btn btn-sm btn-primary"
            (click)="showOrderDetails(order.id)"
          >
            Подробнее
          </button>
        </td>
      </tr>
      <tr *ngIf="!filteredOrders.length">
        <td colspan="5" class="text-center">Нет заказов для отображения</td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="text-center mt-4" *ngIf="hasMoreOrders">
    <button class="btn btn-secondary" (click)="loadMoreOrders()">Загрузить ещё</button>
  </div>
</div>
