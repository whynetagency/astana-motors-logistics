<div class="profile-tab container mt-4">
  <h2 class="mb-4">Мой профиль</h2>
  @if (me) {
    <div class="card p-2 w-100 h-100">
      <form class="profile-form row g-3" [formGroup]="profileForm">
        <div class="col-12 d-flex justify-content-end mb-4">
          <button
            type="button"
            class="btn btn-primary"
            (click)="profileForm.enable()"
          >
            Редактировать
          </button>
        </div>

        <div class="col-md-6">
          <label for="email" class="form-label">Электронная почта</label>
          <input
            type="email"
            class="form-control"
            id="email"
            placeholder="Введите ваш email"
            formControlName="email"
            name="email"
          />
        </div>

        <div class="col-md-6">
          <label for="phone" class="form-label">Телефон</label>
          <input
            type="tel"
            class="form-control"
            id="phone"
            placeholder="Введите ваш телефон"
            formControlName="phoneNumber"
            name="phone"
          />
        </div>

        <div class="col-12 d-flex justify-content-between">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="profileForm.invalid || profileForm.disabled || !isFormChanged()"
            (click)="saveProfile()"
          >
            Сохранить изменения
          </button>
          @if (profileForm.enabled) {
            <button type="button" class="btn btn-secondary" (click)="resetForm()">
              Отменить Изменения
            </button>
          }
        </div>
      </form>
    </div>
  }
</div>

<ng-template #confirmPasswordTpl>
  <div class="modal-header">
    <h5 class="modal-title">Подтверждение пароля</h5>
    <button type="button" class="btn-close" aria-label="Close"></button>
  </div>
  <div class="modal-body">
    <p>Введите пароль для подтверждения:</p>
    <form class="d-flex">
      <input
        type="password"
        class="form-control me-2"
        placeholder="Пароль"
        [formControl]="confirmPassword"
      />
      <button data-bs-dismiss="modal" type="button" class="btn btn-primary" (click)="passConfirmed.next(true); ">
        Подтвердить
      </button>
    </form>
  </div>
</ng-template>
